(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37fa119a","chunk-366968e6","chunk-73b19a99","chunk-2d0e1b28"],{2724:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("d2-container",[n("crud-search",{ref:"search",attrs:{options:e.crud.searchOptions},on:{submit:e.handleSearch}}),n("d2-crud-x",{ref:"d2Crud",attrs:{columns:e.crud.columns,data:e.crud.list,rowHandle:e.crud.rowHandle,"edit-title":"修改","add-template":e.crud.addTemplate,"add-rules":e.crud.addRules,"edit-template":e.crud.editTemplate,"edit-rules":e.crud.editRules,"form-options":e.crud.formOptions,options:e.crud.options,loading:e.crud.loading,"selection-row":""},on:{"selection-change":e.handleSelectionChange,"dialog-open":e.handleDialogOpen,"row-edit":e.handleRowEdit,"row-add":e.handleRowAdd,"row-remove":e.handleRowRemove,"dialog-cancel":e.handleDialogCancel,"form-data-change":e.handleFormDataChange}},[n("el-button",{staticClass:"d2-mb-5",attrs:{slot:"header",size:"small",type:"primary"},on:{click:e.addRow},slot:"header"},[e._v("新增")])],1),n("crud-footer",{ref:"footer",attrs:{current:e.crud.page.current,size:e.crud.page.size,total:e.crud.page.total},on:{change:e.handlePaginationChange}})],1)},a=[],i=n("f055"),o=n("c9e4"),c={name:"hotelRoomCheckin",mixins:[o["default"]],data:function(){return{}},methods:{pageRequest:function(e){return Object(i["GetList"])(e)}}},u=c,d=n("2877"),l=Object(d["a"])(u,r,a,!1,null,"7a697bcc",null);t["default"]=l.exports},"7c17":function(e,t,n){"use strict";n.r(t),n.d(t,"crudOptions",(function(){return u}));var r=n("6e85"),a=n.n(r),i=n("be16");function o(e){return null==e&&(e=new Date),e.setHours(12),e.setMinutes(0),e.setSeconds(0),e}function c(e,t){e.setTime(e.getTime()+864e5*t)}var u={columns:[{title:"id",key:"id",sortable:!0,search:{disabled:!0},align:"center",width:"80",form:{addDisabled:!0,editDisabled:!0,rules:[{required:!0,message:"请输入id"}]}},{title:"添加时间",key:"createDate",sortable:!0,search:{key:"create_date",disabled:!0},align:"center",type:"datetime",width:"160",form:{addDisabled:!0,editDisabled:!0,rules:[{required:!0,message:"请输入创建时间"}]}},{title:"手机号",key:"mobileValue",sortable:!0,align:"center",search:{disabled:!1,width:"260px"},type:"phoneNumber",form:{editDisabled:!0,rules:[{required:!0,message:"请输入手机号"},{validator:i["mobileValidator"],message:"手机号不正确"}]},valueBuilder:function(e){e.mobileValue={phoneNumber:e.mobile,callingCode:e.telAreaCode}},valueResolve:function(e){null!=e.mobileValue&&(e.mobile=e.mobileValue.phoneNumber,e.telAreaCode=e.mobileValue.callingCode)}},{title:"客户姓名",key:"guestName",sortable:!0,search:{disabled:!1},form:{rules:[{required:!1,message:"请输入客户姓名"}]}},{title:"房间",key:"roomId",sortable:!0,search:{disabled:!1,component:{props:{clearable:!0}}},align:"center",type:"select",form:{editDisabled:!0,rules:[{required:!0,message:"请选择房间"}],props:{filterable:!0}},dict:{url:"/hotel/room/options"}},{title:"入住时间",key:"checkInRange",sortable:!0,width:260,type:"datetimerange",search:{disabled:!0},align:"center",form:{rules:[{required:!0,message:"请输入入住时间"}],component:{span:12,"time-arrow-control":!0,"default-time":["12:00:00","12:00:00"],"picker-options":{shortcuts:[{text:"今天一晚",onClick:function(e){var t=new Date,n=o();c(n,1),e.$emit("pick",[t,n])}},{text:"今天两晚",onClick:function(e){var t=new Date,n=o();c(n,2),e.$emit("pick",[t,n])}},{text:"今天三晚",onClick:function(e){var t=new Date,n=o();c(n,3),e.$emit("pick",[t,n])}},{text:"今天四晚",onClick:function(e){var t=new Date,n=o();c(n,4),e.$emit("pick",[t,n])}},{text:"明天一晚",onClick:function(e){var t=o(),n=o();c(t,1),c(n,2),e.$emit("pick",[t,n])}},{text:"明天两晚",onClick:function(e){var t=new Date,n=new Date;c(t,1),c(n,3),e.$emit("pick",[t,n])}},{text:"明天三晚",onClick:function(e){var t=new Date,n=new Date;c(t,1),c(n,3),e.$emit("pick",[t,n])}}]}}},formatter:function(e,t,n,r){return a()(e.checkInTime).format("YYYY-MM-DD HH:mm")+"至"+a()(e.checkOutTime).format("YYYY-MM-DD HH:mm")}},{title:"天数",key:"dayCount",sortable:!0,align:"center",search:{disabled:!0},form:{disabled:!0,rules:[{required:!0,message:"请输入天数"}]}},{title:"备注",key:"remark",columnName:"remark",sortable:!0,search:{name:"remark",disabled:!0},form:{rules:[{required:!1,message:"请输入备注"}]}}],options:{selectionRow:!0}}},c9e4:function(e,t,n){"use strict";n.r(t);var r=n("7c17"),a=n("f055"),i=n("1fbf");t["default"]={mixins:[i["d2CrudPlus"].crud],data:function(){return{}},created:function(){this.initColumns(),this.afterInit()},methods:{afterInit:function(){},getCrudOptions:function(){return r["crudOptions"]},addRequest:function(e){return this.beforeRequest(e),Object(a["AddObj"])(e)},updateRequest:function(e){return this.beforeRequest(e),Object(a["UpdateObj"])(e)},beforeRequest:function(e){var t=e.checkInRange;null!=t&&t.length>=2&&(e.checkInTime=t[0].getTime(),e.checkOutTime=t[1].getTime())},delRequest:function(e){return Object(a["DelObj"])(e.id)},handleDialogOpen:function(e){null!=e.row&&(e.row.checkInRange=[new Date(e.row.checkInTime),new Date(e.row.checkOutTime)])},doCheckOut:function(e){var t=this;this.$confirm("确定设置该客户离店吗？","离店",{type:"warning"}).then((function(){return Object(a["DoCheckOut"])(e.id)})).then((function(){t.doRefresh()})).catch((function(){}))}}}},f055:function(e,t,n){"use strict";n.r(t),n.d(t,"GetList",(function(){return a})),n.d(t,"AddObj",(function(){return i})),n.d(t,"UpdateObj",(function(){return o})),n.d(t,"DelObj",(function(){return c})),n.d(t,"DoCheckOut",(function(){return u}));var r=n("f58c");function a(e){return Object(r["a"])({url:"/hotel/checkin/page",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/hotel/checkin/add",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/hotel/checkin/update",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/hotel/checkin/delete",method:"post",params:{id:e}})}function u(e){return Object(r["a"])({url:"/hotel/checkin/checkout",method:"post",params:{id:e}})}},f58c:function(e,t,n){"use strict";var r=n("22ce"),a=r["c"];t["a"]=a}}]);