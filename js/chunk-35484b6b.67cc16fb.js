(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35484b6b"],{"157a":function(t,e,i){"use strict";var r=i("49ca"),a=i("1ec2"),n=i("1c02"),l=i("fd6a"),s=i("862a"),o=i("10c6"),u=i("22660"),c=i("8f0c"),p=i("d8a9"),d=c("splice"),f=p("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,g=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!f},{splice:function(t,e){var i,r,c,p,d,f,y=s(this),b=l(y.length),w=a(t,b),x=arguments.length;if(0===x?i=r=0:1===x?(i=0,r=b-w):(i=x-2,r=g(h(n(e),0),b-w)),b+i-r>m)throw TypeError(v);for(c=o(y,r),p=0;p<r;p++)d=w+p,d in y&&u(c,p,y[d]);if(c.length=r,i<r){for(p=w;p<b-r;p++)d=p+r,f=p+i,d in y?y[f]=y[d]:delete y[f];for(p=b;p>b-r+i;p--)delete y[p-1]}else if(i>r)for(p=b-r;p>w;p--)d=p+r-1,f=p+i-1,d in y?y[f]=y[d]:delete y[f];for(p=0;p<i;p++)y[p+w]=arguments[p+2];return y.length=b-r+i,c}})},"384f":function(t,e,i){var r=i("4780"),a=i("4a98").f,n=Function.prototype,l=n.toString,s=/^\s*function ([^ (]*)/,o="name";!r||o in n||a(n,o,{configurable:!0,get:function(){try{return l.call(this).match(s)[1]}catch(t){return""}}})},"7ed9":function(t,e,i){"use strict";var r=i("8a2d"),a=i.n(r);a.a},"8a2d":function(t,e,i){},b1ca:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d2p-cropper-uploader",class:{"is-disabled":t.disabled}},[i("div",{staticClass:"image-list"},[t._l(t.list,(function(e,r){return i("div",{key:r,staticClass:"image-item"},[i("el-image",{staticClass:"image",attrs:{src:e.dataUrl?e.dataUrl:e.url,"data-src":e.url,"preview-src-list":t._urlList,fit:"contain"}}),t.disabled?t._e():i("div",{staticClass:"delete"},[i("i",{staticClass:"el-icon-delete",on:{click:function(i){return t.removeImage(r,e)}}})]),"uploading"===e.status?i("div",{staticClass:"status-uploading"},[i("el-progress",{attrs:{type:"circle",percentage:e.progress,width:70}})],1):"done"===e.status?i("div",{staticClass:"status-done"},[i("i",{staticClass:"el-icon-upload-success el-icon-check"})]):t._e()],1)})),t.limit<=0||t.limit>t.list.length?i("div",{staticClass:"image-item image-plus",on:{click:t.addNewImage}},[i("i",{staticClass:"el-icon-plus cropper-uploader-icon"})]):t._e()],2),i("d2p-cropper",{ref:"cropper",attrs:{title:t.title,cropperHeight:t.cropperHeight,dialogWidth:t.dialogWidth,accept:t.accept,uploadTip:t.uploadTip,maxSize:t.maxSize,cropper:t.cropper,output:"all"},on:{done:t.cropComplete}})],1)},a=[],n=(i("6c52"),i("4425"),i("3cdd"),i("157a"),i("384f"),i("5a00"),i("f5ac"),i("9b8f"),i("aa74"),i("96cf"),i("c80b")),l=i("0e05"),s=i("0e00"),o={name:"d2p-cropper-uploader",mixins:[s["a"].inputBase],components:{D2pCropper:n["default"]},props:{value:{type:[String,Array]},type:{type:String,default:"cos"},uploadTip:{type:String},title:String,cropperHeight:{type:[String,Number]},dialogWidth:{type:[String,Number],default:"50%"},maxSize:{type:Number,default:5},limit:{type:Number,default:1},accept:{type:String,default:".jpg, .jpeg, .png, .gif, .webp"},cropper:{type:Object},uploader:{type:Object}},data:function(){return{index:void 0,list:[]}},watch:{value:function(t){this.$emit("change",t),t!==this.emitValue&&this.initValue(t)}},created:function(){this.emitValue=this.value,this.initValue(this.value)},computed:{_urlList:function(){var t=[];if(this.list){var e=!0,i=!1,r=void 0;try{for(var a,n=this.list[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var l=a.value;t.push(l.url)}}catch(s){i=!0,r=s}finally{try{e||null==n.return||n.return()}finally{if(i)throw r}}}return t}},methods:{initValue:function(t){var e=[];if(null==t||""===t)return e;if("string"===typeof t)e.push({url:t,status:"done"});else{var i=!0,r=!1,a=void 0;try{for(var n,l=t[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var s=n.value;e.push({url:s,status:"done"})}}catch(o){r=!0,a=o}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}this.$set(this,"list",e)},addNewImage:function(){this.disabled||(this.index=void 0,this.$refs.cropper.clear(),this.$refs.cropper.open())},removeImage:function(t,e){this.list.splice(t,1),this.emit()},cropComplete:function(t){var e,i,r,a,n,l,s,o;return regeneratorRuntime.async((function(u){while(1)switch(u.prev=u.next){case 0:return e=t.blob,i=t.dataUrl,r=t.file,a={url:void 0,dataUrl:i,status:"uploading",progress:0},n=function(t){a.progress=t.percent},l=function(t){a.status="error",a.message="文件上传出错:"+t.message,console.log(t)},console.log("blob:",e),s={file:e,fileName:r.name,onProgress:n,onError:l},this.list.push(a),u.next=11,regeneratorRuntime.awrap(this.doUpload(s));case 11:o=u.sent,a.url=o.url,a.status="done",this.emit();case 15:case"end":return u.stop()}}),null,this)},doUpload:function(t){var e=this;return t.config=this.uploader,this.getUploader().then((function(i){return i.upload(t).then((function(t){return null!=e.suffix&&(t.url+=e.suffix),t}))}))},getUploader:function(){var t=this.type;return null!=this.uploader&&null!=this.uploader.type&&(t=this.uploader.type),l["a"].getUploader(t)},emit:function(){var t=[],e=!0,i=!1,r=void 0;try{for(var a,n=this.list[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var l=a.value;if(null!=l.status&&"done"!==l.status)return;"string"===typeof l?t.push(l):t.push(l.url)}}catch(o){i=!0,r=o}finally{try{e||null==n.return||n.return()}finally{if(i)throw r}}var s=t;1===this.limit&&(s=t[0]),this.emitValue=s,this.$emit("input",s)}}},u=o,c=(i("7ed9"),i("2877")),p=Object(c["a"])(u,r,a,!1,null,null,null);e["default"]=p.exports}}]);