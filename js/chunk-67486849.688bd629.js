(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67486849","chunk-739bdef5","chunk-2d0bae0a","chunk-2d0d0a41"],{"2f95":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("d2-container",{class:{"page-compact":e.crud.pageOptions.compact}},[n("template",{slot:"header"},[e._v("图片裁剪上传 "),n("example-helper",{attrs:{title:"帮助说明"}},[n("link-button",{attrs:{href:"http://greper.gitee.io/d2-crud-plus/guide/extends/avatar-cropper.html"}},[e._v("帮助说明")])],1)],1),n("d2-crud-x",{ref:"d2Crud",attrs:{columns:e.crud.columns,data:e.crud.list,rowHandle:e.crud.rowHandle,"edit-title":"修改","add-template":e.crud.addTemplate,"add-rules":e.crud.addRules,"edit-template":e.crud.editTemplate,"edit-rules":e.crud.editRules,"form-options":e.crud.formOptions,options:e.crud.options,loading:e.crud.loading,pagination:e.crud.pagination},on:{"pagination-change":e.handlePaginationChange,"dialog-open":e.handleDialogOpen,"row-edit":e.handleRowEdit,"row-add":e.handleRowAdd,"row-remove":e.handleRowRemove,"dialog-cancel":e.handleDialogCancel,"form-data-change":e.handleFormDataChange}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("crud-search",{ref:"search",attrs:{options:e.crud.searchOptions},on:{submit:e.handleSearch}}),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addRow}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 新增")]),n("crud-toolbar",{attrs:{search:e.crud.searchOptions.show,compact:e.crud.pageOptions.compact,columns:e.crud.columns},on:{"update:search":function(t){return e.$set(e.crud.searchOptions,"show",t)},"update:compact":function(t){return e.$set(e.crud.pageOptions,"compact",t)},refresh:function(t){return e.doRefresh()},"columns-filter-changed":e.handleColumnsFilterChanged}})],1)])],2)},o=[],a=n("6628"),c=n("38a0"),u=n("1fbf"),d=n("699a"),p={name:"formUploader",components:{},mixins:[u["d2CrudPlus"].crud],data:function(){return{helper:d["default"]}},computed:{helperHeight:function(){var e=document.documentElement.clientHeight-100;return e+"px"}},methods:{getCrudOptions:function(){return c["crudOptions"]},pageRequest:function(e){return Object(a["GetList"])(e)},addRequest:function(e){return Object(a["AddObj"])(e)},updateRequest:function(e){return Object(a["UpdateObj"])(e)},delRequest:function(e){return Object(a["DelObj"])(e.id)}}},i=p,s=n("2877"),l=Object(s["a"])(i,r,o,!1,null,null,null);t["default"]=l.exports},"38a0":function(e,t,n){"use strict";n.r(t),n.d(t,"crudOptions",(function(){return r}));var r={options:{height:"100%"},searchOptions:{disabled:!0,show:null},columns:[{title:"头像裁剪",key:"avatar",type:"avatar-cropper"},{title:"支持多个",key:"multi",type:"avatar-cropper",align:"left",form:{component:{props:{limit:5}},helper:"可上传5张图片"}},{title:"其他比例",key:"aspectRatio",type:"avatar-cropper",form:{component:{props:{cropper:{aspectRatio:16/9}}},helper:"16 / 9"}},{title:"阿里云",key:"alioss",type:"avatar-cropper",form:{component:{props:{type:"alioss"}},helper:"上传到阿里云oss"}},{title:"七牛",key:"qiniu",type:"avatar-cropper",form:{component:{props:{type:"qiniu"}},helper:"上传到七牛"}},{title:"本地服务器",key:"local",type:"avatar-cropper",form:{component:{props:{uploader:{type:"form",action:"http://182.150.22.91:2020/upload/form/upload",name:"file"}}},helper:"上传到本地服务器"}}]}},6628:function(e,t,n){"use strict";n.r(t),n.d(t,"GetList",(function(){return o})),n.d(t,"AddObj",(function(){return a})),n.d(t,"UpdateObj",(function(){return c})),n.d(t,"DelObj",(function(){return u}));var r=n("f58c");function o(e){return Object(r["a"])({url:"/cropper/page",method:"get"})}function a(e){return Object(r["a"])({url:"/cropper/add",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/cropper/update",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/cropper/delete",method:"post",data:{id:e}})}},"699a":function(e,t,n){"use strict";n.r(t),t["default"]={init:"  import Vue from 'vue'\n  import d2Crud from 'd2-crud-x'\n  import { d2CrudPlus } from 'd2-crud-plus'\n  import { D2pFileUploader } from 'd2p-extends'\n  // 安装扩展插件\nVue.use(D2pFileUploader, {\n  d2CrudPlus,\n  defaultType: 'cos', //默认使用腾讯云\n  cos: { //腾讯云cos配置\n    domain: 'https://d2p-demo-1251260344.cos.ap-guangzhou.myqcloud.com',\n    bucket: 'd2p-demo-1251260344',\n    region: 'ap-guangzhou',\n    secretId: '', //\n    secretKey: '', // 传了secretKey 和secretId 代表使用本地签名模式（不安全，生产环境不推荐）\n    getAuthorization  (custom) { // 不传secretKey代表使用临时签名模式,此时此参数必传（安全，生产环境推荐）\n      return request({ //请求后端获取sts授权\n        url: '/upload/cos/getAuthorization',\n        method: 'get'\n      }).then(ret => {\n        // 返回结构如下\n        // ret.data:{\n        //   TmpSecretId,\n        //   TmpSecretKey,\n        //   XCosSecurityToken,\n        //   ExpiredTime, // SDK 在 ExpiredTime 时间前，不会再次调用 getAuthorization\n        // }\n        return ret.data\n      })\n    }\n  },\n  alioss: { //阿里云oss配置\n    domain: 'https://d2p-demo.oss-cn-shenzhen.aliyuncs.com',\n    bucket: 'd2p-demo',\n    region: 'oss-cn-shenzhen',\n    accessKeyId: '',\n    accessKeySecret: '',\n    getAuthorization  (custom, context) { // 不传accessKeySecret代表使用临时签名模式,此时此参数必传（安全，生产环境推荐）\n      return request({ //请求后端获取sts授权\n        url: '/upload/alioss/getAuthorization',\n        method: 'get'\n      }).then(ret => {\n        return ret.data\n      })\n    }\n  },\n  qiniu: {\n    bucket: 'd2p-demo',\n    getToken (custom) {\n      return request({ //请求后端获取token\n        url: '/upload/qiniu/getToken',\n        method: 'get'\n      }).then(ret => {\n        return ret.data // {token:xxx,expires:xxx}\n      })\n    },\n    domain: 'http://pzrsldiu3.bkt.clouddn.com'\n  }\n})\n\n  ",crud:"export const crudOptions = {\n  columns: [\n    {\n      title: '头像',\n      key: 'avatar',\n      type: 'avatar-cropper',\n      width: 200,\n      form: {\n        props:{\n          accept:'', // 支持的文件类型\n          dialogWidth:'50%', //对话框宽度\n          cropperHeight: '', //裁剪框高度，默认为浏览器视窗的40%\n          cropper:{}, //裁剪组件参数，请参考https://github.com/fengyuanchen/cropperjs\n          limit: 1, //限制数量，默认为1\n          maxSize: 5, //限制单个文件大小，0为不限制\n        }\n      }\n    }\n  ]\n}\n\n",template:"\n  "}},f58c:function(e,t,n){"use strict";var r=n("22ce"),o=r["c"];t["a"]=o}}]);